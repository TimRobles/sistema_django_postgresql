{% load funciones_propias %}
{% load humanize %}

<h3>
    {% if contexto_encuesta_crm.id not in lista_encuestas %}        
    <button data-form-url="{% url 'crm_app:encuesta_crm_pregunta' contexto_encuesta_crm.slug %}"
        data-table-url="{% url 'crm_app:encuesta_crm_detalle_tabla' contexto_encuesta_crm.slug%}"
        data-keep-open="true"
        data-modal="modal-xl"
        class="update btn btn-warning btn-sm"
        data-bs-toggle="tooltip" data-bs-placement="top" title="Actualizar">
        AÃ±adir Pregunta
    </button>
    {% endif %}

</h3>


<div class="table-responsive">
        <style>
        ul {
            list-style-type: none;
        }

        li {
            border-bottom: 3px solid #ccc;
            padding: 10px 0;
        }
    </style>

    <table class="table">
        <tbody>
            <td>
                <ul>
                    {% for pregunta in contexto_encuesta_crm.pregunta_crm.all %}
                    <li>{{ forloop.counter }}. {{ pregunta.texto }}</li>                        
                        {% if pregunta.tipo_pregunta == 1  %}   
                            <div class="pregunta">
                                {% for alternativa in pregunta.AlternativaCRM_pregunta_crm.all %}
                                <div class="input-group">
                                    <input class="form-check-input respuesta-opcion-crm" type="radio" data-pregunta="{{ pregunta.id }}" data-alternativa="{{ alternativa.id }}" name="{{ pregunta.texto }}" value="{{ alternativa }}">
                                    <label class="input-group-text">{{ alternativa.texto }}</label>
                                </div>
                                {% endfor %}
                            </div>    
                            <br>
                        {% endif %}
                        {% if pregunta.tipo_pregunta == 2  %}   
                            <div class="pregunta">
                                {% for alternativa in pregunta.AlternativaCRM_pregunta_crm.all %}
                                <div class="input-group">
                                    <input class="form-check-input respuesta-alternativa-crm" type="checkbox" data-pregunta="{{ pregunta.id }}" data-alternativa="{{ alternativa.id }}" name="{{ alternativa }}" value="{{ alternativa }}">
                                    <label class="input-group-text">{{ alternativa.texto }}</label>
                                </div>
                                {% endfor %}
                            </div>    
                            <br>
                        {% endif %}
                        {% if pregunta.tipo_pregunta == 3  %}
                            <input class="form-control respuesta-texto-crm" type="text" data-pregunta="{{ pregunta.id }}" name="{{ pregunta.texto }}"
                            required maxlength="100">
                        <br>
                        {% endif %}
                    {% endfor %}
                </ul>


        </tbody>
    </table>
</div>
<br>




